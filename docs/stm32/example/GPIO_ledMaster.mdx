---
sidebar_position: 1.0
---
# 【GPIO】点灯大师

**下载例程代码**： <a href="https://pan.baud-dance.com/d/%E6%B3%A2%E7%89%B9%E5%BE%8B%E5%8A%A8STM32%E4%BE%8B%E7%A8%8B/GPIO_RGB_LED.zip" class="source_download_button" target="_blank">下载代码(CubeIDE)</a> 
<a href="https://fubestore.baud.dance/GPIO_RGB_LED_keil.7z" class="source_download_button" target="_blank">下载代码(Keil)</a>

:::warning
CubeIDE代码请按照 <a href="/docs/stm32/example/HowToImportExample" target="_blank">**例程使用方法🔗**</a> 导入例程，否则下载的可能不是例程而是其他工程。

Keil代码请使用 **ArmCC V6** 编译，否则可能会出现编译错误。[**点击此处安装Keil ArmCC V6🔗**](docs/stm32/keil/installKeil.mdx)
:::

GPIO的第一个例子：控制GPIO输出高电平，点亮学习板正面的LED。

## 如何使用例程

编译并下载程序到学习板，即可看到程序效果：红绿蓝三色小灯循环点亮

## 例程讲解

下面介绍了如何自己实现该例程的功能

#### 1、工程配置

- **分配引脚**：在Pinout&Configuration页面，将 PA6、PA7、PB0 配置为 GPIO_Output，并分别设置 User label 为 BLUE、GREEN、RED

    > **左键**点击对应的引脚，选择 GPIO_Output；
    >
    > **右键**点击对应的引脚，选择 User label，分别输入 BLUE、GREEN、RED

<div style={{ display: "flex", justifyContent: "center", alignItems: "center", marginBottom: "20px"}}>
<img src={require('./img/LED/gpio config.png').default} alt="gpio config" width="600px" />
</div>

- **配置GPIO**：在Pinout&Configuration -> GPIO，点击对应的 PIN，可以在下方的 GPIO output level 中设置初始输出电平

    > 高电平点亮LED，低电平熄灭LED

<div style={{ display: "flex", justifyContent: "center", alignItems: "center", marginBottom: "20px"}}>
<img src={require('./img/LED/配置.png').default} alt="配置" width="600px" />
</div>

#### 2、代码

- 在main.c文件中编写HAL_GPIO_WritePin函数来改变GPIO的输出电平

- 以下代码控制红、绿、蓝三个灯对应的GPIO依次输出电平

```c
HAL_GPIO_WritePin(RED_GPIO_Port, RED_Pin, GPIO_PIN_SET); //红色，点亮
HAL_GPIO_WritePin(BLUE_GPIO_Port, BLUE_Pin, GPIO_PIN_RESET); //蓝色，熄灭
HAL_GPIO_WritePin(GREEN_GPIO_Port, GREEN_Pin, GPIO_PIN_RESET); //绿色，熄灭
HAL_Delay(1000);
HAL_GPIO_WritePin(RED_GPIO_Port, RED_Pin, GPIO_PIN_RESET); //红色，熄灭
HAL_GPIO_WritePin(BLUE_GPIO_Port, BLUE_Pin, GPIO_PIN_RESET); //蓝色，熄灭
HAL_GPIO_WritePin(GREEN_GPIO_Port, GREEN_Pin, GPIO_PIN_SET); //绿色，点亮
HAL_Delay(1000);
HAL_GPIO_WritePin(RED_GPIO_Port, RED_Pin, GPIO_PIN_RESET); //红色，熄灭
HAL_GPIO_WritePin(BLUE_GPIO_Port, BLUE_Pin, GPIO_PIN_SET); //蓝色，点亮
HAL_GPIO_WritePin(GREEN_GPIO_Port, GREEN_Pin, GPIO_PIN_RESET); //绿色，熄灭
HAL_Delay(1000);

```

- `XX_GPIO_Port`和`XX_Pin`是我们设置用户标签后，CubeMX自动帮我们生成的宏定义固定格式，注意不要打错大小写哦~

- 函数最后一个参数：`GPIO_PIN_SET`设置为高电平（点亮），`GPIO_PIN_RESET`设置为低电平（熄灭）

- 三个LED可以同时点亮，尝试不同的组合能显现出不同的颜色~

<div style={{ display: "flex", justifyContent: "center", alignItems: "center", marginBottom: "20px"}}>
<img src={require('./img/LED/RGB.png').default} alt="RGB" width="500px" />
</div>

## 故障排除

[工程建立和配置](/docs/stm32/FAQ)
